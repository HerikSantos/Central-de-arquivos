# Central de arquivos

Um sistema de upload de arquivos utlizando S3 da AWS.

## üöÄ Sobre

Um sistema de upload de arquivos

O sistema foi feito integrado com S3 da AWS

Existe duas entidades, onde somente os usu√°rios podem fazer upload de um arquivo

Cada usu√°rio tem o limite de 200MB para upload.

Os formatos de arquivos aceitos s√£o: Imagem => png, jpeg e jpg e V√≠deo => mp3, mov e mkv

O usu√°rio pode listar, deletar e baixar seus arquivos enviados

As rotas tem limite de requisi√ß√£o por endere√ßo de ip, utilizei o redis para fazer o rate-limit


## Rotas da Aplica√ß√£o

### Clientes
    [POST] - /clients - Cria um novo cliente

        Request:
            body {
                name: string;
                email: string;
                password: string
            }

        Response:
            200,

            400 {
                message: User already exists
            },

            400 {
                message: Invalid email
            }

    [GET] - /clients - Listar todos os usu√°rios registrados

        Response:
            200 {
                "user": [
                    {
                        id: string;
                        name: string;
                        email: string;
                        password: string;
                        availableUploadSpace: number;
                    }
                ]
            },

            500 {
                message: {
                    Error
                }
            }

    [POST] - /clients/login - Gera um token que permite o acesso das rotas que est√£o fechados

        Request:
            body {
                email: string,
                password: string
            }

        Response:
            200 {
                token: string;
            },

            400 {
                message: Password or email is incorrect
            },

            400 {
                message: Invalid email
            }

### Upload
    [POST] - /upload - Upload de um arquivo selecionado (Rota protegida pro Bearer Token)

        Request:

            file: {
                type: {
                    Imagem: {
                        JPEG,
                        JPG,
                        PNG
                    },
                    V√≠deo: {
                        MP4,
                        MOV,
                        MKV
                    }
                }
            }

        Response:

            200 {
                spaceLimiteRemaining: number;
                linkDownload: string;
            }

            400 {
                message: Invalid Token
            }

            400 {
                message: Insufficient space limit
            }

    [GET] - /upload - Returna o usu√°rio e todos o arquivos upados por ele (Rota protegida pro Bearer Token)

        Response:

            200 {

                id: string;
                name: string;
                email: string;
                availableUploadSpace: number;
                files: string;
            }

            400 {
                message: Token is not valid
            }

    [POST] - /upload/{nomeDoArquivo} - Gerar um link de download do arquivo upado que tem validade de 60 segundos o nome do arquivo deve ser passado como par√¢metro

        Respopnse:
            200 {
                linkDonwload: string;
            },

            400 {
                message: File not found
            }


    [DELETE] - /upload/{nomeDoArquivo} - Deleta o arquivo que j√° est√° upado passando o nome dele como par√¢metro

        Response:

            200,

            400 {
                message: Token is not valid
            },

            400 {
                message: File not found
            }

## üõ†Ô∏è Constru√≠do com

* [TypeScript(JavaScript)] - A linguagem usada
* [Express] - O framework web usado
* [Typeorm] - O ORM utilizado
* [JWT] - Usado para a autentica√ß√£o das rotas
* [Bcryptjs] - Usado para o hasheamento das senhas e garantir a seguran√ßa dos dados da aplica√ß√£o
* [MySQL] - Como banco de dados
* [AWS S3] - Para o deploy dos arquivos
* [REDIS] - Para definir um limite de requisi√ß√µes nas rotas


## ‚úíÔ∏è Autores

* **Herik Santos**

<!-- ## üìÑ Licen√ßa

Este projeto est√° sob a licen√ßa (MIT LICENSE) - veja o arquivo [LICENSE.md] (https://github.com/HerikSantos/back-end-barbearia/blob/main/LICENSE) para detalhes. -->
